<!DOCTYPE html>
<html
  lang="ru"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="http://www.thymeleaf.org/"
>
  <head>
    <title>Проекты</title>
    <meta charset="UTF-8" />
    <link rel="icon" th:href="@{/dist/static/img/logo/favicon.ico}" />
    <link
      rel="stylesheet"
      type="text/css"
      th:href="@{/dist/static/css/projects.css}"
    />
    <meta th:name="_csrf" th:content="${_csrf.token}" />
    <meta th:name="_csrf_header" th:content="${_csrf.headerName}" />
    <!--JQuery-->
    <script
      type="text/javascript"
      th:src="@{/dist/static/js/jquery.js}"
    ></script>
    <!-- jQuery Modal -->
    <script
      type="text/javascript"
      th:src="@{/dist/static/js/jquery.modal.js}"
    ></script>
    <link rel="stylesheet" th:href="@{/dist/static/css/jquery.modal.css}" />
  </head>

  <body>
    <div class="projects_wrapper d-flex">
      <div class="projects_wrapper__main d-flex">
        <div th:replace="fragments/menu_sidebar.html"></div>
        <div class="main_general d-flex">
          <div class="main_general__content d-flex">
            <div class="main_general__content_buttons d-flex f-size_14 pad-0_3">
              <a href="/projects/create" class="content_buttons__create d-flex">
                Создать
              </a>
              <button
                type="submit"
                class="content_buttons__delete d-flex"
                id="btn_delete_project"
                onclick="checker()"
                name="delete"
              >
                Удалить
              </button>
              <script type="text/javascript">
                function checker() {}
              </script>
            </div>
            <div class="main_general__content_search d-flex pad-0_3">
              <input
                id="barcode_search_input"
                name="barcode"
                class="content_search__input f-size_14"
                type="search"
                placeholder="Поиск"
              />
            </div>
            <div class="main_general__content_filters d-flex f-size_14 pad-0_3">
              <a href="/" class="content_filters__buttons d-flex"> Все </a>
              <a
                href="/?filter=ONE_TIME"
                class="content_filters__buttons d-flex"
              >
                Разовые
              </a>
              <a href="/?filter=LONG" class="content_filters__buttons d-flex">
                Длинный
              </a>
              <a
                href="/?filter=SUBLEASE_PROJECT"
                class="content_filters__buttons d-flex"
              >
                Субаренда
              </a>
              <a href="/?filter=TEST" class="content_filters__buttons d-flex">
                Тест
              </a>
              <form
                th:action="@{/projects/by-date}"
                method="get"
                class="projects__byDateForm"
              >
                <div class="projects__byDateFormWrapper">
                  <input
                    type="date"
                    name="date"
                    class="projects__byDateFormInp"
                  />
                  <button
                    type="submit"
                    class="content_filters__buttons d-flex projects__byDateFormBtn"
                    style="width: auto"
                  >
                    <svg
                      fill="#000000"
                      version="1.1"
                      id="Capa_1"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      viewBox="0 0 320.001 320.001"
                      xml:space="preserve"
                      class="projects__byDateFormIcon"
                    >
                      <g>
                        <path
                          d="M284.547,31.297C265.102,11.115,239.22,0,211.669,0c-27.551,0-53.433,11.115-72.878,31.297
                        c-31.127,32.304-37.969,80.414-20.53,119.67L12.275,260.964c-8.994,9.333-8.995,24.521-0.001,33.856L29.6,312.804
                        c4.474,4.642,10.45,7.197,16.827,7.197c6.378-0.001,12.354-2.558,16.826-7.2l105.604-109.6c13.259,6.279,27.786,9.593,42.811,9.593
                        c27.552,0,53.434-11.114,72.878-31.295C324.447,140.086,324.447,72.706,284.547,31.297z M48.851,298.924
                        c-0.857,0.89-1.792,1.077-2.426,1.077c-0.633,0-1.567-0.187-2.424-1.075l-17.324-17.981c-1.594-1.654-1.595-4.449-0.001-6.103
                        L128.552,169.11c3.057,4.332,6.469,8.476,10.238,12.388c3.924,4.072,8.114,7.769,12.523,11.086L48.851,298.924z M270.144,167.621
                        c-15.641,16.232-36.407,25.172-58.476,25.172c-22.067,0-42.835-8.939-58.476-25.172c-32.527-33.76-32.527-88.689,0-122.447
                        C168.834,28.94,189.601,20,211.669,20c22.068,0,42.835,8.94,58.476,25.174C302.672,78.932,302.672,133.861,270.144,167.621z"
                        />
                        <path
                          d="M258.275,58.501c-12.43-12.901-28.981-20.006-46.605-20.006c-17.625,0-34.177,7.106-46.606,20.006
                        c-25.448,26.409-25.448,69.383,0,95.792c12.43,12.901,28.981,20.006,46.606,20.006c17.624,0,34.176-7.106,46.605-20.006
                        C283.722,127.882,283.722,84.911,258.275,58.501z M245.551,142.033c-9.069,9.413-21.102,14.597-33.882,14.597
                        c-12.781,0-24.813-5.184-33.882-14.597c-18.935-19.65-18.935-51.623,0-71.273c9.069-9.413,21.102-14.597,33.882-14.597
                        c12.78,0,24.812,5.184,33.882,14.597C264.486,90.41,264.486,122.383,245.551,142.033z"
                        />
                      </g>
                    </svg>
                  </button>
                </div>
              </form>
            </div>
            <div class="main_general__content_table d-flex pad-0_3">
              <table class="content_table__info">
                <tr class="content_table__info_name">
                  <th class="content_table__info_pos">#</th>
                  <th class="content_table__info_pos">Проект</th>
                  <th class="content_table__info_pos">Статус</th>
                  <th class="content_table__info_pos">Контакт</th>
                  <th class="content_table__info_pos">Телефон</th>
                  <th class="content_table__info_pos">Начало аренды</th>
                  <th class="content_table__info_pos">Окончание аренды</th>
                  <th class="content_table__info_pos">Дата и время создания</th>
                  <th class="content_table__info_pos">Сотрудник</th>
                  <th class="content_table__info_pos">Примечание</th>
                  <th class="content_table__info_pos">Тип</th>
                  <th class="content_table__info_pos">Открыть смету</th>
                </tr>
                <tr
                  class="content_table__info_line"
                  th:each="project : ${list_projects}"
                >
                  <td class="content_table__info_column">
                    <input
                      class="column-table_checkbox ids"
                      type="checkbox"
                      name="toDel"
                    />
                    <input
                      type="text"
                      hidden="hidden"
                      th:value="${project.id}"
                    />
                  </td>
                  <td class="content_table__info_column barcode-tool">
                    <a
                      th:href="@{/projects/edit/{id}/(id=${project.getId()})}"
                      th:utext="${project.name}"
                      title="Редактирование проекта"
                    ></a>
                  </td>
                  <td class="content_table__info_column">
                    <span
                      class="tool_status"
                      th:utext="${project.status_value}"
                    ></span>
                    <input
                      type="text"
                      hidden="hidden"
                      th:value="${project.status}"
                    />
                  </td>
                  <td
                    class="content_table__info_column"
                    th:utext="${project.client_name}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${project.phoneNumber}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${#temporals.format(project.start, 'dd-MM-yyyy HH:mm')}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:text="${#temporals.format(project.end, 'dd-MM-yyyy HH:mm')}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${#temporals.format(project.created, 'dd-MM-yyyy HH:mm')}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${project.employee}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${project.note}"
                  ></td>
                  <td
                    class="content_table__info_column"
                    th:utext="${project.classification.getValue()}"
                  ></td>
                  <td class="content_table__info_column">
                    <a
                      th:href="@{/estimate/create/{id}(id=${project.getId()})}"
                      title="Просмотр/редактирование сметы"
                      >Смета</a
                    >
                  </td>
                </tr>
              </table>

              <div class="pagination-control col-lg-12 order-lg-1">
                <!-- Bootstrap 4 -->
                <nav aria-label="Навигация по страницам">
                  <ul class="pagination">
                    <li
                      class="page-item"
                      th:if="${list_projects.totalPages > 0}"
                      th:each="page_number : ${page_numbers}"
                    >
                                            <a
                        class="page-link-m page-link"
                        th:href="@{/(size=${list_projects.size}, page=${page_numberStat.index}, filter=${list_projects.size})}"
                        th:text="${page_numberStat.index}"
                        th:class="${page_number==list_projects.number + 1} ? active"
                      >
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
            <div th:insert="fragments/footer.html"></div>
          </div>
        </div>
      </div>
    </div>
    <div th:insert="fragments/scripts.html"></div>
  </body>
</html>
